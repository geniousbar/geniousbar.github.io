<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge;chrome=1" http-equiv="X-UA-Compatible" /><meta content="initial-scale=1.0, user-scalable=no" name="viewport" /><title>日常学习</title><meta description="geniousbar 日常知识总结" /><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" /><link href="../../stylesheets/style-32b4222b.css" rel="stylesheet" type="text/css" /><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" /><link href="../../images/favicon-6c3f3d04.png" rel="icon" type="image/png" /><script src="../../javascripts/all-b3988275.js"></script></head><body><header><div class="top-menu"><div class="top-menu-wrapper"><div class="top-menu-list"><ul><li><a href="/">Home</a></li><li><a href="/archives/">Archives</a></li><li><a href="/tags/">Tags</a></li><li><a href="/by-year/">By Year</a></li><li id="wechat"><a href="#" onclick="toggleShowWechat()">Wechat</a></li></ul></div></div></div><div id="header-wechat-img"><img src="../../images/wechat_nasa-0d87c0dd.png" /></div><h1 class="logo"><a href="/" title="日常学习"><span class="logo-text">日常学习</span></a></h1></header><main><article><h1 class="article-title"><a href="/2017/04/25/rails-activemodel/">Rails ActiveModel</a></h1><div class="posted-date-wrapper"><i class="fa fa-clock-o"></i><span class="posted-date">April 25, 2017</span></div><div class="tag-labels"><a href="/tags/rails/"><small class="tag-label">rails</small></a><a href="/tags/activemodel/"><small class="tag-label">activemodel</small></a><a href="/tags/ruby/"><small class="tag-label">ruby</small></a></div><hr class="article-header-separator" /><p><a href="#attribute_assignment">AttributeAssignment</a><br>
<a href="#callbacks">Callbacks</a><br>
<a href="#dirty">Dirty</a><br>
<a href="#validations">Validations</a></p>
<h2 id="rails-activemodel">rails activemodel</h2>

<div class="highlight"><pre class="highlight ruby"><code>    <span class="k">module</span> <span class="nn">ActiveModel</span>
      <span class="kp">extend</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">Autoload</span>

      <span class="nb">autoload</span> <span class="ss">:AttributeAssignment</span>
      <span class="nb">autoload</span> <span class="ss">:AttributeMethods</span>
      <span class="nb">autoload</span> <span class="ss">:BlockValidator</span><span class="p">,</span> <span class="s1">'active_model/validator...</span></code></pre></div><div class="read-more"><a href="/2017/04/25/rails-activemodel/">Read More <i class="fa fa-angle-double-right"></i></a></div><hr class="article-separator" /><h1 class="article-title"><a href="/2017/04/25/docker-abc/">docker 入门</a></h1><div class="posted-date-wrapper"><i class="fa fa-clock-o"></i><span class="posted-date">April 25, 2017</span></div><div class="tag-labels"><a href="/tags/docker/"><small class="tag-label">docker</small></a></div><hr class="article-header-separator" /><h4 id="docker">docker</h4>

<h4 id="概念">概念</h4>
<p>image(景象), container(容器),volume（数据卷）</p>
<div class="highlight"><pre class="highlight plaintext"><code>    镜像(Image)和容器(Container)的关系,就像是面向对象程序设计中 的 类 和 实例 一样,镜像是静态的定义,容器是镜像运行时的实体。容器可以被 创建、启动、停止、删除、暂停等。
    容器的实质是进程,但与直接在宿主执行的进程不同,容器进程运行于属于自己的 独立的 命名空间。因此容器可以拥有自己的 root 文件系统、自己的网络配置、 自己的进程空间,甚至自己的用户 ID...</code></pre></div><div class="read-more"><a href="/2017/04/25/docker-abc/">Read More <i class="fa fa-angle-double-right"></i></a></div><hr class="article-separator" /><h1 class="article-title"><a href="/2017/04/20/rails-activerecord/">Rails ActivRecord源码（未完成）</a></h1><div class="posted-date-wrapper"><i class="fa fa-clock-o"></i><span class="posted-date">April 20, 2017</span></div><div class="tag-labels"><a href="/tags/rails/"><small class="tag-label">rails</small></a><a href="/tags/sourcecode/"><small class="tag-label">sourcecode</small></a></div><hr class="article-header-separator" /><h2 id="rails-activerecord-源码">rails activerecord 源码</h2>

<h2 id="数据库的连接调用过程">数据库的连接调用过程</h2>

<ol>
  <li>
    <p>activercord base中的代码</p>

<div class="highlight"><pre class="highlight ruby"><code>   <span class="c1"># activerecord/lib/active_record/railtie.rb</span>
     <span class="no">ActiveSupport</span><span class="p">.</span><span class="nf">on_load</span><span class="p">(</span><span class="ss">:active_record</span><span class="p">)</span> <span class="k">do</span>
       <span class="nb">self</span><span class="p">.</span><span class="nf">configurations</span> <span class="o">=</span> <span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">config</span><span class="p">.</span><span class="nf">database_configuration</span>

       <span class="k">begin</span></code></pre></div>
</li>
</ol><div class="read-more"><a href="/2017/04/20/rails-activerecord/">Read More <i class="fa fa-angle-double-right"></i></a></div><hr class="article-separator" /><h1 class="article-title"><a href="/2017/04/19/linux-maintain/">linux维护</a></h1><div class="posted-date-wrapper"><i class="fa fa-clock-o"></i><span class="posted-date">April 19, 2017</span></div><div class="tag-labels"><a href="/tags/linux/"><small class="tag-label">linux</small></a></div><hr class="article-header-separator" /><h3 id="二台机器之间同步大文件拷贝文件到另一台机器">二台机器之间同步大文件(拷贝文件到另一台机器)</h3>
<p>rsync -rP –rsh=ssh /file/path name@ip:/file/path</p>
<h3 id="建立软连接">建立软连接</h3>
<p>ln -s original/file/path soft/file/path</p>
<h3 id="linux后台启动服务">linux后台启动服务</h3>
<p>nohup ruby http_server.rb 2&gt;&amp;1 » log.log 2&gt;&amp;1 /dev/null &amp;<br>
nohup command &amp;&gt; /dev/null &amp;</p>
<h3 id="linux根据关键字得到pid号">linux根据关键字得到pid号</h3>
<p>pgrep -f keyword</p><div class="read-more"><a href="/2017/04/19/linux-maintain/">Read More <i class="fa fa-angle-double-right"></i></a></div><hr class="article-separator" /><h1 class="article-title"><a href="/2017/02/25/docker/">Docker</a></h1><div class="posted-date-wrapper"><i class="fa fa-clock-o"></i><span class="posted-date">February 25, 2017</span></div><div class="tag-labels"><a href="/tags/docker/"><small class="tag-label">Docker</small></a></div><hr class="article-header-separator" /><h3 id="安装docker">安装docker</h3>
<div class="highlight"><pre class="highlight plaintext"><code>阿里云的安装脚本
curl -sSL http://acs-public-mirror.oss-cn-hangzhou.aliyuncs.com/docker-engine/internet | sh -
使用脚本自动安装
Docker 官方为了简化安装流程，提供了一套安装脚本，CentOS 系统上可以使用这套脚本安装：
curl -sSL https://get.docker.com/ | sh

DaoCloud 的安装脚本
curl -sSL https://get...</code></pre></div><div class="read-more"><a href="/2017/02/25/docker/">Read More <i class="fa fa-angle-double-right"></i></a></div><hr class="article-separator" /><h1 class="article-title"><a href="/2017/01/13/postgres/">Postgres</a></h1><div class="posted-date-wrapper"><i class="fa fa-clock-o"></i><span class="posted-date">January 13, 2017</span></div><div class="tag-labels"><a href="/tags/database/"><small class="tag-label">database</small></a><a href="/tags/postgres/"><small class="tag-label">postgres</small></a></div><hr class="article-header-separator" /><h3 id="pg创建只读用户">pg创建只读用户</h3>
<div class="highlight"><pre class="highlight plaintext"><code>SELECT date_trunc('minute', dd) :: TIMESTAMP
FROM generate_series('2016-10-01' :: TIMESTAMP, '2016-12-31' :: TIMESTAMP, '10 minute' :: INTERVAL) dd;

CREATE USER read_from_pg WITH ENCRYPTED PASSWORD '...';
GRANT CONNECT ON DATABASE test to...</code></pre></div><div class="read-more"><a href="/2017/01/13/postgres/">Read More <i class="fa fa-angle-double-right"></i></a></div><hr class="article-separator" /><h1 class="article-title"><a href="/2016/11/11/firefox/">Firefox</a></h1><div class="posted-date-wrapper"><i class="fa fa-clock-o"></i><span class="posted-date">November 11, 2016</span></div><div class="tag-labels"><a href="/tags/firefox/"><small class="tag-label">Firefox</small></a></div><hr class="article-header-separator" /><h3 id="如何才能使用非签名的附加组件高级用户">如何才能使用非签名的附加组件？（高级用户）</h3>

<p>Firefox ESR 45版，以及 开发者版 和 Nightly 版，将允许通过改变偏好来屏蔽增强的附加组件签名要求，请在 Firefox 配置编辑器（about:config 页）将 xpinstall.signatures.required 的值改为 false。还有其它一些山寨版的 Firefox 也允许此项屏蔽。更多内容，参阅 MozillaWiki 文章 附加组件/扩展签名。</p>
<div class="read-more"><a href="/2016/11/11/firefox/">Read More <i class="fa fa-angle-double-right"></i></a></div><hr class="article-separator" /><h1 class="article-title"><a href="/2016/10/21/ruby-magic/">Ruby</a></h1><div class="posted-date-wrapper"><i class="fa fa-clock-o"></i><span class="posted-date">October 21, 2016</span></div><div class="tag-labels"><a href="/tags/ruby/"><small class="tag-label">Ruby</small></a></div><hr class="article-header-separator" /><h3 id="排列组合">排列组合</h3>
<div class="highlight"><pre class="highlight plaintext"><code>arr = [1, 2, 3, 4, 5]
arr.combination(3).to_a
ary.each_cons(3).to_a
</code></pre></div><h3 id="ruby-gil">ruby GIL</h3>
<div class="highlight"><pre class="highlight plaintext"><code>1: Ruby MRI为了线程安全，用了GIL只支持单核。任何时刻只有一个线程在运行：当一个Thread阻塞时（比如IO, sleep等），就会切换到另个一线程。 所以就算用了celluloid, puma自动创建多线程的，MRI下每个进程还是单核。
而Rubinius，JRuby则没有GIL，支持多核（每个线程分配一个cpu）...</code></pre></div><div class="read-more"><a href="/2016/10/21/ruby-magic/">Read More <i class="fa fa-angle-double-right"></i></a></div><hr class="article-separator" /><h1 class="article-title"><a href="/2016/10/01/javascript-good-part/">Javascript 语言精粹</a></h1><div class="posted-date-wrapper"><i class="fa fa-clock-o"></i><span class="posted-date">October 01, 2016</span></div><div class="tag-labels"><a href="/tags/javascript/"><small class="tag-label">javascript</small></a></div><hr class="article-header-separator" /><h3 id="javascrip-语言精粹">javascrip 语言精粹</h3>

<ul>
  <li>假值： false, null, undefined, 0, ‘ ‘, NaN</li>
  <li>数据类型： 数字， 字符串， 布尔， null， undefined， 对象</li>
  <li>反射： typeof, hasOwnProperty</li>
  <li>delete： 不会触及原型任何对象， 会显露出来原型中的对象属性</li>
</ul>

<h5 id="函数">函数</h5>

<ul>
  <li>函数也是对象，只是可以调用</li>
  <li>调用模式： 方法调用模式， 函数调用模式， 构造器调用模式，apply调用模式（在初始化this上存在差异）</li>
  </ul><div class="read-more"><a href="/2016/10/01/javascript-good-part/">Read More <i class="fa fa-angle-double-right"></i></a></div><hr class="article-separator" /><h1 class="article-title"><a href="/2016/09/07/linux-tar/">linux tar command</a></h1><div class="posted-date-wrapper"><i class="fa fa-clock-o"></i><span class="posted-date">September 07, 2016</span></div><div class="tag-labels"><a href="/tags/linux/"><small class="tag-label">linux</small></a><a href="/tags/command/"><small class="tag-label">command</small></a></div><hr class="article-header-separator" /><h1 id="zip">zip</h1>
<p>zip可能是目前使用得最多的文档压缩格式。</p>

<p>它最大的优点就是在不同的操作系统平台，比如Linux， Windows以及Mac OS上使用。缺点就是支持的压缩率不是很高，而tar.gz和tar.gz2在压缩率方面做得非常好。闲话少说，我们步入正题吧：</p>

<p>我们可以使用下列的命令压缩一个目录：<br>
zip -r archive_name.zip directory_to_compress</p>

<p>下面是如果解压一个zip文档：<br>
unzip archive_name.zip</p>

<h1 id="targz">tar.gz</h1>
<p>这种格...</p><div class="read-more"><a href="/2016/09/07/linux-tar/">Read More <i class="fa fa-angle-double-right"></i></a></div><hr class="article-separator" /><div class="paginate-wrapper"><div class="previous-page"><a href="/page/4/"><i class="fa fa-arrow-left"></i> Previous Page</a></div><div class="next-page"><a href="/page/6/"><i class="fa fa-arrow-right"></i> Next Page</a></div></div><div class="page-number">Page 5 of 7</div></article></main><footer><div class="footer-wrapper"><div class="author"><div class="image-wrapper"><a href="/author/"><img alt="author" src="../../images/profile-1e71686a.png" /></a></div></div><div class="image-content"><img src="../../images/wechat_nasa-0d87c0dd.png" /></div><div class="copyright"><i class="fa fa-copyright"></i> 2019 <a href="/">日常学习</a> - geniousbar</div></div><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?b43ef53b285c49e1af0bd7080994c825";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script></footer></body></html>